---
title: "Impact of Mother's Characteristics on Child Test Scores"
date: 2026-02-15
description: |
  Exploring the NLSY dataset and observing how maternal IQ and family advantage 
  work together to influence child development. 
output:
  distill::distill_article:
    self_contained: false
---
```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE, message = FALSE, warning = FALSE)
library(tidyverse)
kidiq <- read.csv("kidiq.csv")
```
Overview: 
In this project, I wanted to see how much a child’s home environment affects 
their success. I looked at how things like a mother's education and her work
status, which I grouped together as "family advantage" connect with her IQ to 
influence her child's test scores.

The Double Advantage
The graph below breaks down these test scores. I grouped the families by their
advantage level and separated them by the mother's IQ to see if having a more
"advantaged" background makes a difference even when IQ is the same.

```{r plot, echo=FALSE, message=FALSE, warning=FALSE}
plot_iq <- kidiq %>%
  mutate(
    family_advantage = case_when(
      mom_hs == 0 & mom_work <= 2 ~ "Low advantage",
      mom_hs == 0 & mom_work >  2 ~ "Mixed advantage",
      mom_hs == 1 & mom_work <= 2 ~ "Mixed advantage",
      mom_hs == 1 & mom_work >  2 ~ "High advantage",
      TRUE ~ NA_character_
    ),
    iq_group = case_when(
      mom_iq <= quantile(mom_iq, 0.33, na.rm = TRUE) ~ "Lower IQ Group",
      mom_iq <= quantile(mom_iq, 0.67, na.rm = TRUE) ~ "Middle IQ Group",
      TRUE ~ "Higher IQ Group"
    ),
    family_advantage = factor(family_advantage,
                              levels = c("Low advantage","Mixed advantage","High advantage")),
    iq_group = factor(iq_group,
                      levels = c("Lower IQ Group","Middle IQ Group","Higher IQ Group"))
  ) %>%
  filter(!is.na(family_advantage), !is.na(iq_group)) %>%
  
  ggplot(aes(x = family_advantage, y = kid_score, fill = family_advantage)) +
  geom_violin(trim = FALSE, alpha = 0.6, width = 0.8, color = NA) +
  stat_summary(fun = median, geom = "crossbar", width = 0.5, color = "black", fatten = 1) +
  geom_jitter(width = 0.10, height = 0, alpha = 0.25, size = 1.2, color = "black", show.legend = FALSE) +
  facet_wrap(~ iq_group, nrow = 1) +
  scale_fill_brewer(palette = "Set2", guide = "none") +
  scale_x_discrete(labels = c("Low advantage"="Low","Mixed advantage"="Mixed","High advantage"="High")) +
  labs(
    title = "Child Scores by Family Background and Maternal IQ",
    subtitle = "Higher family advantage leads to higher scores even within the same IQ groups.",
    x = "Family Advantage Level",
    y = "Child's Test Score",
    caption = "Data: NLSY (Gelman & Hill, 2007)"
  ) +
  theme_minimal(base_size = 13) +
  theme(
    legend.position = "none",
    plot.title = element_text(face = "bold", size = 16),
    strip.text = element_text(face = "bold", size = 11),
    panel.grid.major.x = element_blank()
  )

print(plot_iq)
```

Understanding the Results: 
The plot suggests that a child’s test performance is not determined by maternal IQ alone, but is heavily influenced by the family's socio-economic environment. In the lower and middle IQ groups, there is a clear upward trend: as family advantage increases, child test scores rise accordingly. This indicates that factors like a mother’s education and employment status provide a vital support system that can significantly improve developmental outcomes.

A key finding in this visualisation is the "equalsing" effect of a high-advantage home. Children born to mothers in the lower IQ group who have high family advantage often achieve scores comparable to children in the middle IQ group. This suggests that a stable, advantaged environment can effectively bridge the gap in test scores. While the impact of family advantage appears to level off for mothers who already have high IQs, the overall pattern confirms that a supportive home environment is essential for helping children reach their full potential, particularly when they are not starting from a high-IQ baseline.

The Myth of Meritocracy?

While the violin plots show general group trends, this section explores whether "merit" (maternal IQ) alone determines outcomes, or if structural factors like education create the true path to success.

```{r plot2, echo=FALSE, message=FALSE, warning=FALSE}
plot_merit <- kidiq %>%
  mutate(
    mom_hs_label = factor(mom_hs, labels = c("No HS diploma", "HS diploma")),
    ability_level = case_when(
      mom_iq <= quantile(mom_iq, 0.25, na.rm = TRUE) ~ "Low ability",
      mom_iq <= quantile(mom_iq, 0.75, na.rm = TRUE) ~ "Medium ability",
      TRUE ~ "High ability"
    ),
    outcome_level = case_when(
      kid_score <= quantile(kid_score, 0.25, na.rm = TRUE) ~ "Low outcome",
      kid_score <= quantile(kid_score, 0.75, na.rm = TRUE) ~ "Medium outcome",
      TRUE ~ "High outcome"
    ),
    surprising_case = case_when(
      ability_level == "High ability" & outcome_level == "Low outcome" ~ 
        "High ability, low outcome",
      ability_level == "Low ability"  & outcome_level == "High outcome" ~
        "Low ability, high outcome",
      TRUE ~ NA_character_
    )
  )

ggplot(plot_merit, aes(mom_iq, kid_score)) +
  stat_bin2d(bins = 24) +
  scale_fill_viridis_c(name = "Cases", option = "C", direction = -1) +
  geom_smooth(method = "lm", se = FALSE, linetype = "dashed",
              color = "white", linewidth = 1) +
  geom_point(
    data = dplyr::filter(plot_merit, !is.na(surprising_case)),
    aes(color = surprising_case),
    size = 2.6
  ) +
  scale_color_manual(
    values = c("High ability, low outcome" = "#E69F00",
               "Low ability, high outcome" = "#56B4E9"),
    name = "Surprising cases"
  ) +
  facet_wrap(~ mom_hs_label, nrow = 1) +
  coord_cartesian(xlim = c(75, 135), ylim = c(40, 120)) +
  labs(
    title = "Is Merit Enough?",
    subtitle = "Tiles show where most cases sit; dashed lines show the IQ→score trend. 
    Highlighted dots mark exceptions where merit alone didn’t predict outcomes.",
    x = "Mother’s IQ (ability proxy)",
    y = "Child’s test score",
    caption = "Data: NLSY (Gelman & Hill, 2007)"
  ) +
  theme_minimal(base_size = 12) +
  theme(
    legend.position = "bottom",
    legend.title = element_text(face = "bold"),
    strip.text = element_text(face = "bold"),
    plot.title = element_text(face = "bold"),
    panel.grid.minor = element_blank(),
    panel.grid.major.x = element_blank(),
    plot.margin = margin(10, 20, 10, 20)
  )
```
While the initial analysis suggests that background advantage generally raises scores, a closer examination of individual cases shows that this relationship varies by maternal education. Within the high school diploma group, the steeper trend indicates that maternal IQ is more strongly associated with child outcomes when educational stability is present. In this context, high school completion appears to amplify the impact of maternal ability on child development.

The most revealing feature of this visualization is the presence of unexpected cases. Several children achieve high scores despite lower maternal ability, and these outcomes occur more frequently when mothers hold a high school diploma. Conversely, higher maternal ability does not consistently produce strong outcomes in the absence of this educational foundation. Together, these patterns suggest that individual ability matters, but the structural baseline provided by maternal education plays a critical role in shaping children’s trajectories.

